{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Echoes of Nature</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/style.css' %}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/responsive.css' %}"
    />
    <link rel="stylesheet" href="https://use.typekit.net/dqu3ozr.css" />
  </head>

  <body>
<script src="https://unpkg.com/gsap@3.14.2/dist/gsap.min.js" defer></script>
<script src="https://unpkg.com/gsap@3.14.2/dist/ScrollTrigger.min.js" defer></script>
    {% include "partial/background_audio.html" %}
    <header class="top-nav">
      <a href="{% url 'home' %}" class="Logo">
        <img
          src="{% static 'img/Logo.png' %}"
          srcset="{% static 'img/Logo@2x.png' %} 2x"
          alt="Logo"
        />
      </a>

      <nav class="nav-icons">
        <a href="{% url 'home' %}" class="hide-on-mobile">
          <img
            id="Home_2"
            src="{% static 'img/icons/Home.png' %}"
            data-default="{% static 'img/icons/Home.png' %}"
            data-active="{% static 'img/icons/Home_active.png' %}"
            alt="Home"
          />
        </a>

        <a href="javascript:history.back()" class="hide-on-mobile">
          <img
            id="Back_2"
            src="{% static 'img/icons/Back.png' %}"
            data-default="{% static 'img/icons/Back.png' %}"
            data-active="{% static 'img/icons/Back_active.png' %}"
            alt="Back"
          />
        </a>

        <a href="#" class="hide-on-mobile">
          <img
            id="Audio_On_2"
            src="{% static 'img/icons/Audio_On.png' %}"
            data-on="{% static 'img/icons/Audio_On.png' %}"
            data-on-active="{% static 'img/icons/Audio_On_active.png' %}"
            data-off="{% static 'img/icons/Audio_off.png' %}"
            data-off-active="{% static 'img/icons/Audio_off_active.png' %}"
            alt="Audio Toggle"
          />
        </a>

        <a href="#" id="menuBtn" class="menu-btn">
          <img
            id="Menu"
            src="{% static 'img/icons/Menu.png' %}"
            data-default="{% static 'img/icons/Menu.png' %}"
            data-active="{% static 'img/icons/Menu_active.png' %}"
            alt="Menu"
          />
        </a>

        <!-- Dropdown Overlay -->
        <div class="dropdown-mask">
          <div id="customDropdown" class="dropdown-content">
							<div class="menu-bg">
								<a href="{% url 'home' %}" class="menu-item">Home</a>
								<a href="{% url 'Deepdive' %}" class="menu-item">
									Echoes of Nature
								</a>
								<a href="{% url 'birds_list' %}" class="menu-item">
									Birds of Hiranandani Estate
								</a>
								<a href="{% url 'flora_list' %}" class="menu-item">
									Flora of Hiranandani Estate
								</a>
								<a href="{% url 'Naturetrail' %}" class="menu-item">
									Nature Trail
								</a>
								<a href="{% url 'Birdwatching' %}" class="menu-item">
									Birdwatcher's Guide
								</a>
								<a href="{% url 'Urbanlegends' %}" class="menu-item">
									Building with Nature
								</a>
							</div>
          </div>
        </div>
      </nav>
    </header>

    <div id="Echoes_of_Nature">Echoes of Nature</div>

    <button id="scrollUpBtn" aria-label="Scroll to top">
      <img
        src="{% static 'img/icons/Back.png' %}"
        data-default="{% static 'img/icons/Back.png' %}"
        data-active="{% static 'img/icons/Back_active.png' %}"
        alt="Scroll to top"
      />
    </button>

    <!-- Main page overlay (content block) -->
    <div id="overlay-page" class="overlay">
      <div class="page-content">{% block overlay_content %}{% endblock %}</div>
    </div>
    <footer class="footerweb">
      <div class="footerweb-img hide-on-mobile">
        <img src="{% static 'img/footerbird.webp' %}" alt="Footer logo" />
      </div>
      <div class="footerwebcol1">
        <div class="footer-logo">
          <img loading="lazy" src="{% static 'img/footer-logo.png' %}" alt="Footer logo" />
        </div>
        <div class="footerwebcol1_1">
          House of Hiranandani, Olympia
          <br />
          Central Avenue, Hiranandani Gardens
          <br />
          Powai, Mumbai 400076, INDIA
          <br />
          <br />
          Call: +91 22620 93456<br /> Email: property@houseofhiranandani.com
          <br />
          <br />
          www.hiranandani.com
        </div>
        
      </div>
      <div class="footerwebcol1">
        <div class="footerwebcol2_1">SITEMAP</div>
        <div class="footerwebcol2_2"><a href="{% url 'home' %}">Home</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'Deepdive' %}">Echoes of Nature</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'birds_list' %}">Birds of Hiranandani, Thane</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'flora_list' %}">Trees of Hiranandani, Thane</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'Naturetrail' %}">Nature Trail</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'Birdwatching' %}">Birdwatching</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'Urbanlegends' %}">Building with Nature</a></div>
      </div>
      <div class="footerwebcol3">
        <div class="footerwebcol2_2"><a href="{% url 'Disclaimer' %}">Disclaimer</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'Terms' %}">Terms & Conditions</a></div>
        <div class="footerwebcol2_3"><a href="{% url 'Privacy' %}">Privacy Policy</a></div>
        <div class="footerwebcol2_3">Cookies Declaration</div>
        <div class="footerwebcol2_3"><a href="{% url 'Credits' %}">Credits & Usage</a></div>
      </div>
      <div class="footerweb-img2">
        <img src="{% static 'img/footerbird.webp' %}" alt="Footer logo" />
      </div>
      <div class="footerwebcol4">
        <div class="footerwebcol2_1">CONNECT WITH US</div>
        <div class="footer-icons">
          <a href="https://www.facebook.com/HouseofHiranandani" target="_blank">
						<div class="footer-icon">
							<img loading="lazy" src="{% static 'img/Facebook.png' %}" alt="Facebook" />
						</div>
					</a>

					<a href="https://www.instagram.com/houseofhiranandani/" target="_blank">
						<div class="footer-icon">
							<img loading="lazy" src="{% static 'img/Instagram.png' %}" alt="Instagram" />
						</div>
					</a>

					<a href="https://www.youtube.com/channel/UC5b7xMV-q5ZIkJf0SxtlRdg" target="_blank">
						<div class="footer-icon">
							<img  loading="lazy" src="{% static 'img/Youtube.png' %}" alt="YouTube" />
						</div>
					</a>

					<a href="https://www.linkedin.com/company/house-of-hiranandani/" target="_blank">
						<div class="footer-icon">
							<img loading="lazy" src="{% static 'img/Linkedin.png' %}" alt="LinkedIn" />
						</div>
					</a>
        </div>
        <div class="footerwebcol4_1">
          <div class="footerwebcol2_1">
          ECHOES OF NATURE</div>
          This immersive experience is created for public education and
          non-commercial display and is brought to you by
        </div>
        <div class="tommorrow-logo">
          <img loading="lazy" src="{% static 'img/tommorrow-logo.png' %}" />
        </div>
        <div class="footerwebcol4_2">
          A Sustainability initiative by House of Hiranandani
        </div>
      </div>
      <div class="footerweb-img3">
        <img loading="lazy" src="{% static 'img/footerbird.webp' %}" alt="Footer logo" />
      </div>
      <div class="footerweb-img4 hide-on-mobile">
        <img loading="lazy" src="{% static 'img/webfooterflower.webp' %}" alt="Footer logo" />
      </div>
			<div class="copyright">
          Â© 2026 House of Hiranandani. All rights reserved.
        </div>
    </footer>
    <div class="after-footer-gap"></div>
    <!-- Footer -->

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll("img[data-active]");

        // Normalize path (works for / and /home/)
        const currentPath = window.location.pathname.replace(/\/$/, "");
        const homePaths = ["", "/", "/home"]; // add more if needed

        buttons.forEach((btn) => {
          const defaultSrc = btn.dataset.default;
          const activeSrc = btn.dataset.active;
          const isHomeIcon = btn.id === "Home_2";

          // âœ… If this is the home page â†’ keep Home active
          if (isHomeIcon && homePaths.includes(currentPath)) {
            btn.src = activeSrc;
            btn.classList.add("active");
            return; // â›” skip hover/touch logic
          }

          /* ---- Hover (Desktop) ---- */
          btn.addEventListener("mouseenter", () => {
            btn.src = activeSrc;
          });

          btn.addEventListener("mouseleave", () => {
            btn.src = defaultSrc;
          });

          /* ---- Mouse Click ---- */
          btn.addEventListener("mousedown", () => {
            btn.src = activeSrc;
          });

          btn.addEventListener("mouseup", () => {
            btn.src = defaultSrc;
          });

          /* ---- Touch (Mobile) ---- */
          btn.addEventListener("touchstart", () => {
            btn.src = activeSrc;
          });

          btn.addEventListener("touchend", () => {
            btn.src = defaultSrc;
          });
        });
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document
          .querySelector(".overlay")
          ?.style.setProperty("visibility", "visible");
      });
    </script>
    <script>
      window.addEventListener("pageshow", (event) => {
        if (event.persisted) {
          const dropdown = document.querySelector(".dropdown-content");
          const mask = document.querySelector(".dropdown-mask");
          const menuBtn = document.getElementById("menuBtn");
          const menuIcon = menuBtn?.querySelector("img");

          if (!dropdown || !mask || !menuBtn || !menuIcon) return;

          // Reset GSAP state HARD
          gsap.set(dropdown, {
            yPercent: -100,
            opacity: 0,
          });

          mask.style.pointerEvents = "none";
          menuBtn.classList.remove("is-open");

          // Reset icon
          menuIcon.src = menuIcon.dataset.default;
        }
      });
    </script>
		    <script>
      (function () {
        const STORAGE_KEY = "kioskMuted";
        const audioBtn = document.getElementById("Audio_On_2");

        if (!audioBtn) return;

        function isMuted() {
          return localStorage.getItem(STORAGE_KEY) === "true";
        }

        function setMuted(value) {
          localStorage.setItem(STORAGE_KEY, value);
        }

        function applyMuteState() {
          const muted = isMuted();
          document.querySelectorAll("audio, video").forEach((media) => {
            media.muted = muted;
          });
        }

        function updateAudioIcon(active = false) {
          if (isMuted()) {
            audioBtn.src = active
              ? audioBtn.dataset.offActive
              : audioBtn.dataset.off;
          } else {
            audioBtn.src = active
              ? audioBtn.dataset.onActive
              : audioBtn.dataset.on;
          }
        }

        /* ---------- INITIAL APPLY ---------- */
        document.addEventListener("DOMContentLoaded", () => {
          applyMuteState();
          updateAudioIcon(false);
        });

        window.addEventListener("pageshow", applyMuteState);

        /* ---------- BUTTON TOGGLE ---------- */
        audioBtn.addEventListener("click", () => {
          const muted = !isMuted();
          setMuted(muted);

          applyMuteState();
          updateAudioIcon(false);

          // ðŸ”” Notify page-level audio controllers
          document.dispatchEvent(
            new CustomEvent("globalAudioToggle", {
              detail: { muted },
            }),
          );
        });

        /* ---------- HOVER / TOUCH ---------- */
        audioBtn.addEventListener("mouseenter", () => updateAudioIcon(true));
        audioBtn.addEventListener("mouseleave", () => updateAudioIcon(false));
        audioBtn.addEventListener("mousedown", () => updateAudioIcon(true));
        audioBtn.addEventListener("mouseup", () => updateAudioIcon(false));
        audioBtn.addEventListener("touchstart", () => updateAudioIcon(true), {
          passive: true,
        });
        audioBtn.addEventListener("touchend", () => updateAudioIcon(false), {
          passive: true,
        });

        /* ---------- SAFETY: mute late media ---------- */
        document.addEventListener(
          "play",
          (e) => {
            if (e.target instanceof HTMLMediaElement && isMuted()) {
              e.target.muted = true;
            }
          },
          true,
        );

        const observer = new MutationObserver(applyMuteState);
        observer.observe(document.documentElement, {
          childList: true,
          subtree: true,
        });
      })();
    </script>

<script>
	document.addEventListener("DOMContentLoaded", () => {

  if (!window.gsap) {
    console.warn("GSAP not loaded");
    return;
  }

  gsap.registerPlugin(ScrollTrigger);

  // animations here
});
document.addEventListener("DOMContentLoaded", () => {

  const menuBtn = document.getElementById("menuBtn");
  const menuIcon = menuBtn?.querySelector("img");
  const mask = document.querySelector(".dropdown-mask");
  const dropdown = document.querySelector(".dropdown-content");

  if (!menuBtn || !menuIcon || !mask || !dropdown) return;

  const defaultSrc = menuIcon.dataset.default;
  const activeSrc = menuIcon.dataset.active;

  let isOpen = false;
  const isDesktop = window.innerWidth > 1200;

  /* =========================================
     DESKTOP (GSAP ANIMATION)
  ========================================= */
  if (isDesktop) {

    // Initial hidden state
    gsap.set(dropdown, {
      display: "none",
      yPercent: -100,
      opacity: 0
    });

    const tl = gsap.timeline({
      paused: true,
      onStart: () => {
        isOpen = true;
        dropdown.style.display = "block";   // ðŸ”¥ show before animating
        mask.style.pointerEvents = "auto";
        menuIcon.src = activeSrc;
        menuBtn.classList.add("is-open");
      },
      onReverseComplete: () => {
        isOpen = false;
        dropdown.style.display = "none";    // ðŸ”¥ hide after animation
        mask.style.pointerEvents = "none";
        menuIcon.src = defaultSrc;
        menuBtn.classList.remove("is-open");
      }
    });

    tl.to(dropdown, {
      yPercent: 0,
      opacity: 1,
      duration: 0.4,
      ease: "power3.out"
    });

    menuBtn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      isOpen ? tl.reverse() : tl.play();
    });

    document.addEventListener("click", () => {
      if (isOpen) tl.reverse();
    });

  }

  /* =========================================
     TABLET + MOBILE (NO GSAP)
  ========================================= */
  else {

    dropdown.style.display = "none";

    menuBtn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();

      isOpen = !isOpen;

      if (isOpen) {
        dropdown.style.display = "block";
        mask.style.pointerEvents = "auto";
        menuIcon.src = activeSrc;
        menuBtn.classList.add("is-open");
      } else {
        dropdown.style.display = "none";
        mask.style.pointerEvents = "none";
        menuIcon.src = defaultSrc;
        menuBtn.classList.remove("is-open");
      }
    });

  }

  mask.addEventListener("click", (e) => e.stopPropagation());

});
</script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const scrollBtn = document.getElementById("scrollUpBtn");
        if (!scrollBtn) return;

        window.addEventListener("scroll", () => {
          if (window.scrollY > window.innerHeight * 0.3) {
            scrollBtn.classList.add("active");
          } else {
            scrollBtn.classList.remove("active");
          }
        });

        scrollBtn.addEventListener("click", () => {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        });
      });
    </script>
		<!-- GSAP -->

  </body>
</html>
